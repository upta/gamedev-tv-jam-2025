[gd_scene load_steps=14 format=3 uid="uid://cqfd1a8bvojms"]

[ext_resource type="Script" uid="uid://bbfflnbqq66yw" path="res://game/mining_area.gd" id="1_bdnut"]
[ext_resource type="Resource" uid="uid://b21g17kle5gak" path="res://input/game/mining_context.tres" id="2_7pupr"]
[ext_resource type="PackedScene" uid="uid://bbbwjt5ay0u58" path="res://game/mining/chunk_master.tscn" id="3_aipip"]
[ext_resource type="PackedScene" uid="uid://bsjevfbrnec8e" path="res://game/mining/miner_player.tscn" id="3_ujp4m"]
[ext_resource type="PackedScene" uid="uid://clmb3d6jg1rcg" path="res://game/mining/blocks/dirt.tscn" id="4_tvd5v"]
[ext_resource type="PackedScene" uid="uid://c5vufw7g3ksiw" path="res://game/mining/blocks/solid_wall.tscn" id="5_in7h5"]
[ext_resource type="PackedScene" uid="uid://bn5s5y6x2w8t" path="res://game/mining/chunk.tscn" id="5_ujp4m"]
[ext_resource type="PackedScene" uid="uid://b58mymyph0k1" path="res://game/mining/blocks/chip.tscn" id="6_in7h5"]
[ext_resource type="PackedScene" uid="uid://clx3xveo5i3ah" path="res://game/mining/blocks/empty.tscn" id="7_x3fj0"]
[ext_resource type="PackedScene" uid="uid://b01msrd728kv1" path="res://game/mining/mining_ui.tscn" id="10_x3fj0"]
[ext_resource type="AudioStream" uid="uid://hqf24276caf1" path="res://assets/music/VG_Rave.ogg" id="11_aipip"]
[ext_resource type="PackedScene" uid="uid://cnxuqu35cj1mi" path="res://game/start_countdown.tscn" id="11_tvd5v"]
[ext_resource type="PackedScene" uid="uid://d1q8xcp42pnas" path="res://game/end_mining.tscn" id="12_wb13v"]

[node name="MiningArea" type="Node2D"]
script = ExtResource("1_bdnut")
input_context = ExtResource("2_7pupr")

[node name="ChunkMaster" parent="." instance=ExtResource("3_aipip")]
block_types = Dictionary[int, PackedScene]({
0: ExtResource("7_x3fj0"),
1: ExtResource("4_tvd5v"),
2: ExtResource("5_in7h5"),
3: ExtResource("6_in7h5")
})
block_size_px = 40.0
chunk_radius = 10

[node name="Chunk" parent="." node_paths=PackedStringArray("chunk_master") instance=ExtResource("5_ujp4m")]
chunk = ExtResource("5_ujp4m")
chunk_master = NodePath("../ChunkMaster")

[node name="MinerPlayer" parent="." instance=ExtResource("3_ujp4m")]
base_mining_rate = 0.5

[node name="Camera2D" type="Camera2D" parent="MinerPlayer"]

[node name="MiningUI" parent="." node_paths=PackedStringArray("chip_labels") instance=ExtResource("10_x3fj0")]
chip_labels = {
0: NodePath("PanelContainer/MarginContainer/GridContainer/ChipBlue Label"),
1: NodePath("PanelContainer/MarginContainer/GridContainer/ChipGreen Label"),
2: NodePath("PanelContainer/MarginContainer/GridContainer/ChipRed Label"),
3: NodePath("PanelContainer/MarginContainer/GridContainer/ChipYellow Label")
}

[node name="StartCountdown" parent="." instance=ExtResource("11_tvd5v")]

[node name="EndMining" parent="." node_paths=PackedStringArray("chip_labels") instance=ExtResource("12_wb13v")]
chip_labels = {
0: NodePath("PanelContainer/MarginContainer/GridContainer/ChipBlue Label"),
1: NodePath("PanelContainer/MarginContainer/GridContainer/ChipGreen Label"),
2: NodePath("PanelContainer/MarginContainer/GridContainer/ChipRed Label"),
3: NodePath("PanelContainer/MarginContainer/GridContainer/ChipYellow Label")
}

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_aipip")
volume_db = -6.0
autoplay = true
parameters/looping = true
